<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Background Execution사용자가 앱을 적극적으로 사용하지 않을 때, 시스템은 앱을 백그라운드 상태로 이동시킨다. 많은 앱의 경우 백그라운드 상태는 앱이 일시 중지되기 전 잠시 들리는 곳이다. 앱을 일시 중지 시키는 것은 배터리 수명을 향상시켜 사용자의 주의를 끈 새로운 포그라운드 앱에게 중요한 시스템 자원을 사용하게 한다. 대부분의 앱은 일시">
<meta name="keywords" content="GCD,Background,Operation,Asynchronous">
<meta property="og:type" content="article">
<meta property="og:title" content="App Programming Guide for iOS - Background Execution (3)">
<meta property="og:url" content="https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/index.html">
<meta property="og:site_name" content="PacaLog">
<meta property="og:description" content="Background Execution사용자가 앱을 적극적으로 사용하지 않을 때, 시스템은 앱을 백그라운드 상태로 이동시킨다. 많은 앱의 경우 백그라운드 상태는 앱이 일시 중지되기 전 잠시 들리는 곳이다. 앱을 일시 중지 시키는 것은 배터리 수명을 향상시켜 사용자의 주의를 끈 새로운 포그라운드 앱에게 중요한 시스템 자원을 사용하게 한다. 대부분의 앱은 일시">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-06-09T07:50:21.764Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="App Programming Guide for iOS - Background Execution (3)">
<meta name="twitter:description" content="Background Execution사용자가 앱을 적극적으로 사용하지 않을 때, 시스템은 앱을 백그라운드 상태로 이동시킨다. 많은 앱의 경우 백그라운드 상태는 앱이 일시 중지되기 전 잠시 들리는 곳이다. 앱을 일시 중지 시키는 것은 배터리 수명을 향상시켜 사용자의 주의를 끈 새로운 포그라운드 앱에게 중요한 시스템 자원을 사용하게 한다. 대부분의 앱은 일시">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>App Programming Guide for iOS - Background Execution (3)</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2018/06/08/uitableviewdatasourceprefetching/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&text=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&is_video=false&description=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=App Programming Guide for iOS - Background Execution (3)&body=Check out this article: https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&name=App Programming Guide for iOS - Background Execution (3)&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Background-Execution"><span class="toc-number">1.</span> <span class="toc-text">Background Execution</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Executing-Finite-Length-Tasks"><span class="toc-number">1.1.</span> <span class="toc-text">Executing Finite-Length Tasks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Listing-3-1"><span class="toc-number">1.1.0.0.1.</span> <span class="toc-text">Listing 3-1</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Downloading-Content-in-the-Background"><span class="toc-number">1.2.</span> <span class="toc-text">Downloading Content in the Background</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementing-Long-Running-Tasks"><span class="toc-number">1.3.</span> <span class="toc-text">Implementing Long-Running Tasks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Declaring-Your-App’s-Supported-Background-Tasks"><span class="toc-number">1.3.1.</span> <span class="toc-text">Declaring Your App’s Supported Background Tasks</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">2.</span> <span class="toc-text">Reference</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        App Programming Guide for iOS - Background Execution (3)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">PacaLog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-06-09T05:03:53.000Z" itemprop="datePublished">2018-06-09</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Asynchronous/">Asynchronous</a>, <a class="tag-link" href="/tags/Background/">Background</a>, <a class="tag-link" href="/tags/GCD/">GCD</a>, <a class="tag-link" href="/tags/Operation/">Operation</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Background-Execution"><a href="#Background-Execution" class="headerlink" title="Background Execution"></a>Background Execution</h2><p>사용자가 앱을 적극적으로 사용하지 않을 때, 시스템은 앱을 백그라운드 상태로 이동시킨다. 많은 앱의 경우 백그라운드 상태는 앱이 일시 중지되기 전 잠시 들리는 곳이다. 앱을 일시 중지 시키는 것은 배터리 수명을 향상시켜 사용자의 주의를 끈 새로운 포그라운드 앱에게 중요한 시스템 자원을 사용하게 한다.</p>
<p>대부분의 앱은 일시 중지 상태로 쉽게 이동하지만 앱이 백그라운드에서 계속 동작할 수 있는 몇 가지 정당한 사유가 존재한다. 하이킹 앱은 시간 경과에 따라 유저의 위치를 추적하여 해당 코스가 하이킹 지도 위에 나타나도록 할 수 있다. 오디오 앱은 잠금 화면에서 음악을 계속 재생해야 할 수 있다. 또 다른 앱은 유저에게 컨텐츠를 보이기까지의 지연을 최소화하고자 백그라운드에서 컨텐츠를 다운로드 할 수도 있다. 만약 당신의 앱이 백그라운드에서 동작하는 것이 필요하다면, iOS는 효율적이고 시스템 자원이나 유저의 배터리를 소모하지 않고 할 수 있도록 도와준다. iOS가 제공하는 기술은 세 가지 카테고리로 나눠진다.</p>
<ul>
<li>포그라운드에서 짧은 작업을 시작한 앱은 앱이 백그라운드 상태로 이동했을 때 그 작업을 완료할 시간을 요청할 수 있다.</li>
<li>포그라운드에서 다운로드를 시작한 앱은 시스템에게 그 다운로드에 대한 관리를 넘김으로써 다운로드가 지속되는 동안 앱이 일시 중지되거나 종료될 수 있도록 한다.</li>
<li>특정 유형의 작업을 지원하기 위해 백그라운드에서 동작해야 하는 특정 작업을 실행하는 앱은 하나 이상의 백그라운드 실행 모드에 대한 지원을 선언할 수 있다.</li>
</ul>
<p>그렇게 하지 않으면 전반적인 사용자 경험이 향상되지 않는 한 항상 백그라운드 작업은 삼가라. 유저가 다른 앱을 실행하거나 기기를 잠그고 지금 당장 사용하지 않는다는 이유로 앱은 백그라운드 상태로 이동할 수 있다. 두 경우 모두, 유저는 당신의 앱이 지금 의미있는 작업을 할 필요가 없다고 신호를 보내는 것이다. 그러한 조건 하에서 실행을 지속하는 것은 기기의 배터리를 소모할 뿐이고 사용자가 앱을 강제 종료시키게 만들지도 모른다. 그래서 백그라운드에서 할 작업에 대해 유의하고 가능하다면 피하라.</p>
<h3 id="Executing-Finite-Length-Tasks"><a href="#Executing-Finite-Length-Tasks" class="headerlink" title="Executing Finite-Length Tasks"></a>Executing Finite-Length Tasks</h3><p>백그라운드 모드로 이동하는 앱은 시스템에 의해 일시 중지될 수 있도록 가능한 한 빨리 그 자신들이 조용한 상태가 될 것으로 예상한다. 만약 앱이 작업 도중이고 그 작업을 완료하기 위해 약간의 시간이 더 필요하다면, <code>UIApplication</code> 객체의 <a href="https://developer.apple.com/documentation/uikit/uiapplication/1623051-beginbackgroundtask" target="_blank" rel="noopener"><code>beginBackgroundTaskWithName:expirationHandler:</code></a>나 <a href="https://developer.apple.com/documentation/uikit/uiapplication/1623031-beginbackgroundtaskwithexpiratio" target="_blank" rel="noopener"><code>beginBackgroundTaskWithExpirationHandler:</code></a>를 실행하여 추가 실행 시간을 요구하라. 이들 메서드 둘 중 하나를 호출하는 것은 앱의 작업을 완료하도록 약간의 시간을 줌으로써 앱의 종료를 일시적으로 지연시킨다. 작업이 끝나면 앱은 <a href="https://developer.apple.com/documentation/uikit/uiapplication/1622970-endbackgroundtask" target="_blank" rel="noopener"><code>endBackgroundTask:</code></a> 메서드를 호출해 시스템에게 작업이 끝났다는 것과 일시 중지될 수 있음을 알린다.</p>
<p><code>beginBackgroundTaskWithName:expirationHandler:</code> 나 <code>beginBackgroundTaskWithExpirationHandler:</code> 메서드를 호출할 때마다 해당 작업과 관련된 고유한 토큰을 생성한다. 앱이 작업을 마치면 고유한 토큰을 인자로 갖는 <code>endBackgroundTask:</code>를 호출하여 시스템이 그 작업이 끝났음을 알게 한다. 백그라운드 작업에 대한 <code>endBackgroundTask:</code>를 호출하지 않으면 앱이 종료가 된다. 작업 시작시 만료 핸들러를 제공한다면 시스템이 그 핸들러를 호출하고 작업을 완료하고 종료를 피하는 마지막 기회를 준다.</p>
<p>백그라운드 작업을 지정하기 위해 앱이 백그라운드 모드로 이동하길 기다릴 필요가 없다. 더 나은 방법은 작업 시작 전 <code>beginBackgroundTaskWithName:expirationHandler:</code> 나 <code>beginBackgroundTaskWithExpirationHandler:</code>를 호출하고 마치자마자 <code>endBackgroundTask:</code>를 호출하는 것이다. 앱이 포그라운드에서 동작할 때도 이 패턴을 따를 수 있다.</p>
<p>Listing 3-1은 앱이 백그라운드로 전환되었을 때 장기 실행 작업을 어떻게 시작하는 지 보여준다. 이 에제에서 백그라운드 작업 시작 요청에는 작업이 너무 오래 걸리는 경우에 대비해 만료 핸들러가 포함된다. 작업은 dispatch 큐에 넣어져 <code>applicationDidEnterBackground:</code> 메서드가 바로 반환되도록 비동기적으로 실행된다. ‘블록’(클로저)의 사용은 백그라운드 작업 식별자 같은 중요한 변수에 대한 참조를 유지하는 데 필요한 코드를 단순화시킨다. <code>bgTask</code> 변수는 클래스의 멤머 변수로 현재 백그라운드 작업의 식별자를 가리키고 메서드에서 사용되기 전 초기화된다.</p>
<h6 id="Listing-3-1"><a href="#Listing-3-1" class="headerlink" title="Listing 3-1"></a>Listing 3-1</h6><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">applicationDidEnterBackground</span><span class="params">(<span class="number">_</span> application: UIApplication)</span></span> &#123;</span><br><span class="line">    bgTask = application.beginBackgroundTask(withName: <span class="string">"MyTask"</span>) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="comment">// Clean up any unfinished task business by marking where you</span></span><br><span class="line">        <span class="comment">// stopped or ending the task outright.</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span>,</span><br><span class="line">            <span class="keyword">let</span> bgTask = strongSelf.bgTask <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        </span><br><span class="line">        application.endBackgroundTask(bgTask)</span><br><span class="line">        strongSelf.bgTask = <span class="type">UIBackgroundTaskInvalid</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">DispatchQueue</span>.global().async &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span>,</span><br><span class="line">            <span class="keyword">let</span> bgTask = strongSelf.bgTask <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        <span class="comment">// Do the work associated with the task, preferably in chunks.</span></span><br><span class="line">        application.endBackgroundTask(bgTask)</span><br><span class="line">        strongSelf.bgTask = <span class="type">UIBackgroundTaskInvalid</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(가이드에 있던 Objective-C 코드를 Swift로 바꿔보았습니다.)</p>
<blockquote>
<p>작업을 시작할 때 항상 만료 핸들러를 제공하라. 하지만 앱의 남은 실행 시간을 알고 싶다면 UIApplication의 <a href="https://developer.apple.com/documentation/uikit/uiapplication/1623029-backgroundtimeremaining" target="_blank" rel="noopener"><code>backgroundTimeRemaining</code></a>의 값을 사용하라.</p>
</blockquote>
<p>당신만의 만료 핸들러 안에서 작업을 종료하는 데 필요한 추가 코드를 포함시킬 수 있다. 그러나 만료 핸들러가 호출될 때는 앱의 종료가 임박했기 때문에 추가하는 코드는 실행하는 데 오래걸리면 안 된다. 이러한 이유 때문에 상태 정보의 최소 정리만을 수행하고 작업을 끝내야 한다.</p>
<h3 id="Downloading-Content-in-the-Background"><a href="#Downloading-Content-in-the-Background" class="headerlink" title="Downloading Content in the Background"></a>Downloading Content in the Background</h3><p>파일을 다운로드 할 때는 <code>NSURLSession</code> 객체를 사용하여 앱이 일시 중지되거나 종료될 때를 고려하여 시스템이 다운로드 과정을 관리하도록 하는 것이 좋다. 백그라운드 전송을 위한 <code>NSURLSession</code> 객체를 구성하면 시스템은 그 전송들을 각각의 프로세스로 관리하고 정상적인 방법으로 상태를 다시 앱에 보고한다. 전송이 진행되는 동안 앱이 종료되면 시스템은 백그라운드에서 전송을 계속하고 전송이 완료되거나 하나 이상의 작업에 앱의 주의가 필요할 경우 앱을 시작한다.</p>
<p>백그라운드 전송을 지원하기 위해 당신은 <code>NSURLSession</code> 객체를 적절히 구성해야 한다. 세션을 구성하기 위해 <code>NSURLSessionConfiguration</code> 객체를 만들고 여러 속성을 적절한 값으로 설정한다. 그 다음 만들어진 설정 객체를 <code>NSURLSession</code>의 초기화 메서드에 전달한다.</p>
<p>백그라운드 다운로드를 지원하는 구성 객체를 만드는 과정은 다음과 같다.</p>
<ol>
<li><code>NSURLSessionConfiguration</code>의 <a href="https://developer.apple.com/documentation/foundation/nsurlsessionconfiguration/1407496-backgroundsessionconfigurationwi" target="_blank" rel="noopener"><code>backgroundSessionConfigurationWithIdentifier:</code></a>를 사용해 구성 객체를 만든다.</li>
<li>구성 객체의 <a href="https://developer.apple.com/documentation/foundation/nsurlsessionconfiguration/1617174-sessionsendslaunchevents" target="_blank" rel="noopener"><code>sessionSendsLaunchEvents</code></a> 프로퍼티를 YES로 설정한다.</li>
<li>앱이 포그라운드에 있을 동안 전송을 시작한다면 구성 객체의 <a href="https://developer.apple.com/documentation/foundation/nsurlsessionconfiguration/1411552-discretionary" target="_blank" rel="noopener"><code>discretionary</code></a> 프로퍼티 또한 YES로 설정하는 것을 추천한다.</li>
<li>구성 객체의 다른 프로퍼티들도 적절히 설정한다.</li>
<li><code>NSURLSession</code> 객체의 생성에 구성 객체를 사용한다.</li>
</ol>
<p>일단 구성되면 <code>NSURLSession</code> 객체는 적절한 시간에 업로드 및 다운로드 작업을 시스템에 원활하게 전달한다. 앱이 계속 실행되는 동안(포그라운드나 백그라운드) 작업이 끝났을 경우 세션 객체는 일반적인 방법으로 델리게이트에 알린다. 작업이 아직 끝나지 않았고 시스템이 앱을 종료시켰다면 시스템은 백그라운드에서 지속해서 작업을 관리한다. 사용자가 앱을 종료했을 경우 시스템은 남아 있는 작업을 취소한다.</p>
<p>백그라운드 세션과 관련된 모든 작업이 완료되면 시스템은 종료된 앱을 재시작하고(<code>sessionSendsLaunchEvents</code> 프로퍼티가 YES로 설정되었고 사용자가 앱을 강제 종료하지 않았다고 가정) 앱 델리게이트의 <a href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622941-application" target="_blank" rel="noopener"><code>application:handleEventsForBackgroundURLSession:completionHandler:</code></a> 메서드를 호출한다.(시스템은 또한 인증 문제나 앱의 주의가 필요한 작업을 수행하기 위해 앱을 재시작할 수 있다.) 델리게이트 메서드 구현에서 제공된 식별자를 이용해 전과 같은 구성으로 <code>NSURLSessionConfiguration</code>과 <code>NSURLSession</code>의 새 객체를 만든다. 시스템은 새 세션 객체를 이전 작업과 다시 연결하고 해당 상태를 세션 객체의 델리게이트에 보고한다.</p>
<h3 id="Implementing-Long-Running-Tasks"><a href="#Implementing-Long-Running-Tasks" class="headerlink" title="Implementing Long-Running Tasks"></a>Implementing Long-Running Tasks</h3><p>구현하기 위해 더 많은 시간이 요구되는 작업의 경우 일시 중지되지 않고 백그라운드에서 실행할 수 있도록 특정 권한을 요청해야 한다. iOS에서는 특정 앱 유형만 백그라운드에서 실행할 수 있다.</p>
<ul>
<li>음악 플레이어 같은 백그라운드에서 들리는 콘텐츠를 재생하는 앱</li>
<li>백그라운드에서 녹음을 하는 앱</li>
<li>네비게이션 앱 같이 사용자에게 항상 내 위치를 알려주는 앱</li>
<li>VolP(Voice over Internet Protocol)를 지원하는 앱</li>
<li>새 콘텐츠를 다운로드하고 처리해야 하는 앱</li>
<li>바깥 액세서리에서 정기적인 업데이트를 받는 앱</li>
</ul>
<p>이러한 서비스를 구현하는 앱은 지원하는 서비스와 그 서비스의 관련 측면을 구현하기 위해 사용하는 시스템 프레임워크를 선언해야 한다. 서비스를 선언하는 것은 앱이 어떤 서비스를 사용하는 지 시스템이 알게끔 하지만 어떤 경우에는 실제로 앱이 일시 중단되는 것을 막는 시스템 프레임 워크이다.</p>
<h4 id="Declaring-Your-App’s-Supported-Background-Tasks"><a href="#Declaring-Your-App’s-Supported-Background-Tasks" class="headerlink" title="Declaring Your App’s Supported Background Tasks"></a>Declaring Your App’s Supported Background Tasks</h4><p>일부 유형의 백그라운드 실행에 대한 지원은 이를 사용하는 앱에 의해 미리 선언되어야 한다. Xcode 5 이상에서는 앱이 지원하는 백그라운드 모드를 프로젝트 세팅의 Capabilities 탭에서 선언한다. 백그라운드 모드를 가능하게 하는 것은 Info.plist에 <code>UIBackgroundModes</code> 키를 추가하는 것이다. 하나 이상의 체크 박스를 선택하면 해당 백그라운드 모드 값이 해당 키에 추가된다. 표 3-1은 Xcode가 Info.plist 파일의 <code>UIBackgroundModes</code> 키에 할당하는 백그라운드 모드 값들이다.</p>
<table>
<thead>
<tr>
<th><center>Xcode 백그라운드 모드</center></th>
<th><center>UIBackgroundModes value</center></th>
<th><center>설명</center></th>
</tr>
</thead>
<tbody>
<tr>
<td>Audio and AirPlay</td>
<td>audio</td>
<td>앱은 백그라운드에서 유저에게 컨텐츠를 들려주거나 녹음할 수 있다.(이 콘텐츠는 스트리밍 에어플레이를 사용하는 오디오나 비디오 컨텐츠를 포함한다.) 사용자는 앱이 마이크를 사용할 수 있는 권한을 주어야 한다. 더 많은 정보는 <a href="https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW6" target="_blank" rel="noopener">Supporting User Privacy</a>를 참고하라.</td>
</tr>
<tr>
<td>Location updates</td>
<td>location</td>
<td>앱이 백그라운드에서 실행 중일 때도 사용자에게 위치 정보를 제공한다.</td>
</tr>
<tr>
<td>Voice over IP</td>
<td>voip</td>
<td>사용자가 인터넷 연결을 사용해 전화를 걸 수 있도록 제공한다.</td>
</tr>
<tr>
<td>Newsstand downloads</td>
<td>newsstand-content</td>
<td>백그라운드에서 잡지나 신문 컨텐츠를 다운로드하고 처리하는 Newsstand 앱이다.</td>
</tr>
<tr>
<td>External accessory communication</td>
<td>external-accessory</td>
<td>이 앱은 External Accessory 프레임워크를 통해 정기적으로 업데이트를 전달하는 하드웨어 액세서리와 함께 동작한다.</td>
</tr>
<tr>
<td>Uses Bluetooth LE accessories</td>
<td>bluetooth-central</td>
<td>이 앱은 Core Bluetooth 프레임워크를 통해 정기적인 업데이트를 전달하는 블루투스 액세서리와 함께 동작한다.</td>
</tr>
<tr>
<td>Acts as a Bluetooth LE accessory</td>
<td>bluetooth-peripheral</td>
<td>이 앱은 Core Bluetooth 프레임 워크를 통해 주변 장치 모드에서 블루 통신 모드를 지원한다. 이 모드는 유저의 권한 설정이 필요하며 <a href="https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW6" target="_blank" rel="noopener">Supporting User Privacy</a>를 참고하라.</td>
</tr>
<tr>
<td>Background fetch</td>
<td>fetch</td>
<td>이 앱은 네트워크로부터 소량의 컨텐츠를 다운로드하고 처리한다.</td>
</tr>
<tr>
<td>Remote notifications</td>
<td>remote-notification</td>
<td>이 앱은 푸시 알림이 도착하면 컨텐츠를 다운로드하길 원한다. 푸시 알림과 관련된 컨텐츠 표시의 지연을 최소화하기 위해 이 알림을 사용하라.</td>
</tr>
</tbody>
</table>
<p>위의 각 모드들은 관련 이벤트에 응답하기 위해 적절한 시기에 앱이 깨어나야 하거나 시작되어야 함을 시스템에게 알게 한다. 예를 들어 음악 재생을 시작하고 백그라운드로 이동하는 앱은 오디오 출력 버퍼를 채우기 위해 실행 시간이 더 필요하다. 오디오 모드를 활성화하면 적절한 간격으로 앱에 필요한 콜백을 계속해서 수행해야 한다는 것을 시스템 프레임 워크에 알려준다. 만약 앱이 이 모드를 선택하지 않으면, 앱에 의해 재생되거나 녹음되는 오디오는 앱이 백그라운드로 갔을 때 정지한다.</p>
<p>(작성중…)</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW1" target="_blank" rel="noopener">App Programming Guide for iOS - Background Execution</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Background-Execution"><span class="toc-number">1.</span> <span class="toc-text">Background Execution</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Executing-Finite-Length-Tasks"><span class="toc-number">1.1.</span> <span class="toc-text">Executing Finite-Length Tasks</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Listing-3-1"><span class="toc-number">1.1.0.0.1.</span> <span class="toc-text">Listing 3-1</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Downloading-Content-in-the-Background"><span class="toc-number">1.2.</span> <span class="toc-text">Downloading Content in the Background</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Implementing-Long-Running-Tasks"><span class="toc-number">1.3.</span> <span class="toc-text">Implementing Long-Running Tasks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Declaring-Your-App’s-Supported-Background-Tasks"><span class="toc-number">1.3.1.</span> <span class="toc-text">Declaring Your App’s Supported Background Tasks</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">2.</span> <span class="toc-text">Reference</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&text=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&is_video=false&description=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=App Programming Guide for iOS - Background Execution (3)&body=Check out this article: https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&title=App Programming Guide for iOS - Background Execution (3)"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://wnstkdyu.github.io/2018/06/09/appprogrammingguidebackgroundexecution/&name=App Programming Guide for iOS - Background Execution (3)&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Alpaca
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-116302583-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'alpacablog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


