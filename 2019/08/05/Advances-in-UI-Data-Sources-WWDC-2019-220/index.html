<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Current State of the ArtUITableViewDataSource, UICollectionViewDataSourceì—ì„œ ë¹„êµì  ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ APIë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ê²ƒê³¼ ë‹¬ë¦¬ ì§€ê¸ˆì˜ ì•±ì€ ì ì  ë³µì¡í•´ì§€ê³  ìˆë‹¤.  UI data sourceê°€ controllerì— ì˜í•´ ì§€ì›ë˜ëŠ”ë° ControllerëŠ” í•˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§ Web Servic">
<meta name="keywords" content="Data Source">
<meta property="og:type" content="article">
<meta property="og:title" content="Advances in UI Data Sources - WWDC 2019 220">
<meta property="og:url" content="https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/index.html">
<meta property="og:site_name" content="PacaLog">
<meta property="og:description" content="Current State of the ArtUITableViewDataSource, UICollectionViewDataSourceì—ì„œ ë¹„êµì  ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ APIë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ê²ƒê³¼ ë‹¬ë¦¬ ì§€ê¸ˆì˜ ì•±ì€ ì ì  ë³µì¡í•´ì§€ê³  ìˆë‹¤.  UI data sourceê°€ controllerì— ì˜í•´ ì§€ì›ë˜ëŠ”ë° ControllerëŠ” í•˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§ Web Servic">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-05T04:06:43.703Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Advances in UI Data Sources - WWDC 2019 220">
<meta name="twitter:description" content="Current State of the ArtUITableViewDataSource, UICollectionViewDataSourceì—ì„œ ë¹„êµì  ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ APIë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ê²ƒê³¼ ë‹¬ë¦¬ ì§€ê¸ˆì˜ ì•±ì€ ì ì  ë³µì¡í•´ì§€ê³  ìˆë‹¤.  UI data sourceê°€ controllerì— ì˜í•´ ì§€ì›ë˜ëŠ”ë° ControllerëŠ” í•˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§ Web Servic">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Advances in UI Data Sources - WWDC 2019 220</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/08/04/Let-us-Go-2019-Summer/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&text=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&is_video=false&description=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Advances in UI Data Sources - WWDC 2019 220&body=Check out this article: https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&name=Advances in UI Data Sources - WWDC 2019 220&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Current-State-of-the-Art"><span class="toc-number">1.</span> <span class="toc-text">Current State of the Art</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Where-is-Our-Truth"><span class="toc-number">1.1.</span> <span class="toc-text">Where is Our Truth?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ†•-Diffable-Data-Source"><span class="toc-number">2.</span> <span class="toc-text">ğŸ†• Diffable Data Source</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Snapshots"><span class="toc-number">2.1.</span> <span class="toc-text">Snapshots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ë„¤-ê°€ì§€-ìš”ì†Œ"><span class="toc-number">2.2.</span> <span class="toc-text">ë„¤ ê°€ì§€ ìš”ì†Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DiffableDataSourceë¥¼-ì‚¬ìš©í•˜ëŠ”-ì„¸-ê°€ì§€-ì£¼ìš”-ê³¼ì •"><span class="toc-number">2.3.</span> <span class="toc-text">DiffableDataSourceë¥¼ ì‚¬ìš©í•˜ëŠ” ì„¸ ê°€ì§€ ì£¼ìš” ê³¼ì •</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ìƒˆ-Snapshot-ë§Œë“œëŠ”-ë²•"><span class="toc-number">2.3.1.</span> <span class="toc-text">ìƒˆ Snapshot ë§Œë“œëŠ” ë²•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ItemIdentiferTypeì˜-ì •ì˜"><span class="toc-number">2.3.2.</span> <span class="toc-text">ItemIdentiferTypeì˜ ì •ì˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DataSourceì˜-êµ¬ì„±"><span class="toc-number">2.3.3.</span> <span class="toc-text">DataSourceì˜ êµ¬ì„±</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Considerations"><span class="toc-number">2.4.</span> <span class="toc-text">Considerations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IndexPath-based-APIëŠ”-ì–´ë–»ê²Œ-ë˜ëŠ”-ê²ƒì¸ê°€"><span class="toc-number">2.5.</span> <span class="toc-text">IndexPath-based APIëŠ” ì–´ë–»ê²Œ ë˜ëŠ” ê²ƒì¸ê°€?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance"><span class="toc-number">2.5.1.</span> <span class="toc-text">Performance</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">3.</span> <span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-1"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Advances in UI Data Sources - WWDC 2019 220
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">PacaLog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-08-05T04:00:39.000Z" itemprop="datePublished">2019-08-05</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Data-Source/">Data Source</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Current-State-of-the-Art"><a href="#Current-State-of-the-Art" class="headerlink" title="Current State of the Art"></a>Current State of the Art</h2><p><code>UITableViewDataSource</code>, <code>UICollectionViewDataSource</code>ì—ì„œ ë¹„êµì  ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ APIë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ê²ƒê³¼ ë‹¬ë¦¬ ì§€ê¸ˆì˜ ì•±ì€ ì ì  ë³µì¡í•´ì§€ê³  ìˆë‹¤.</p>
<ul>
<li>UI data sourceê°€ controllerì— ì˜í•´ ì§€ì›ë˜ëŠ”ë° ControllerëŠ” í•˜ëŠ” ì¼ì´ ì ì  ë§ì•„ì§</li>
<li>Web Services</li>
<li>DB</li>
</ul>
<p>ì´ëŸ¬í•œ ë³µì¡í•œ ì•±ì„ ë§Œë“¤ë‹¤ ë³´ë©´(ì˜ˆ: Controllerê°€ ë°ì´í„°ê°€ ë°”ë€Œì—ˆë‹¤ê³  UIí•œí…Œ ì•Œë ¤ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°) ì—…ë°ì´íŠ¸ê°€ ì˜ëª»ë˜ì—ˆì„ ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¥¼ ê½¤ ìì£¼ ë³´ê²Œ ëœë‹¤.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*** <span class="type">Terminating</span> app due to uncaught exception '<span class="type">NSInternalInconsistencyException'</span>, reason: '<span class="type">Invalid</span> update: invalid number of sections. <span class="type">The</span> number of sections contained <span class="keyword">in</span> the collection view after the update (<span class="number">10</span>) must be <span class="built_in">equal</span> to the number of sections contained <span class="keyword">in</span> the collection view before the update (<span class="number">10</span>), plus or minus the number of sections inserted or deleted (<span class="number">0</span> inserted, <span class="number">1</span> deleted).'</span><br><span class="line">***</span><br></pre></td></tr></table></figure>
<p>ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•ì€ <code>reloadData()</code> ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ì§€ë§Œ ì´ ë°©ë²•ì€ ì• ë‹ˆë©”ì´ì…˜ì´ ì—†ì–´ ìœ ì €ì—ê²Œ ì¢‹ì€ ì¸ìƒì„ ì£¼ì§€ ëª»í•œë‹¤.</p>
<h3 id="Where-is-Our-Truth"><a href="#Where-is-Our-Truth" class="headerlink" title="Where is Our Truth?"></a>Where is Our Truth?</h3><ul>
<li>Data sourceì™€ í˜„ì¬ UI ìƒíƒœëŠ” í•­ìƒ ë™ì¼í•´ì•¼ í•¨</li>
<li>í˜„ì¬ì˜ ë°©ë²•ì€ ì—ëŸ¬ê°€ ì¼ì–´ë‚˜ê¸° ì‰¬ìš´ ìƒíƒœ</li>
<li>ì¤‘ì•™ ì§‘ì¤‘ëœ Truthê°€ ì—†ìŒ</li>
</ul>
<h2 id="ğŸ†•-Diffable-Data-Source"><a href="#ğŸ†•-Diffable-Data-Source" class="headerlink" title="ğŸ†• Diffable Data Source"></a>ğŸ†• Diffable Data Source</h2><ul>
<li>âŒ <code>performBatchUpdates()</code> - í¬ë˜ì‹œë¥¼ ìœ ë°œí•˜ê³  ê·€ì°®ìœ¼ë©° ë³µì¡í•¨</li>
<li>âœ… <code>apply()</code> - ì‰½ê³  ìë™ìœ¼ë¡œ diffing</li>
</ul>
<h3 id="Snapshots"><a href="#Snapshots" class="headerlink" title="Snapshots"></a>Snapshots</h3><ul>
<li>UI ìƒíƒœì˜ truth</li>
<li>ì„¹ì…˜ê³¼ ì•„ì´í…œì˜ Indexpath ëŒ€ì‹  Unique identifierë¥¼ ì‚¬ìš©</li>
</ul>
<h3 id="ë„¤-ê°€ì§€-ìš”ì†Œ"><a href="#ë„¤-ê°€ì§€-ìš”ì†Œ" class="headerlink" title="ë„¤ ê°€ì§€ ìš”ì†Œ"></a>ë„¤ ê°€ì§€ ìš”ì†Œ</h3><ul>
<li>iOS, tvOS<ul>
<li><code>UICollectionViewDiffableDataSource</code></li>
<li><code>UITableViewDiffableDataSource</code></li>
</ul>
</li>
<li>MacOS<ul>
<li><code>NSCollectionViewDiffableDataSource</code></li>
</ul>
</li>
<li>All Platform<ul>
<li><code>NSDiffableDataSourceSnapshot</code></li>
</ul>
</li>
</ul>
<h3 id="DiffableDataSourceë¥¼-ì‚¬ìš©í•˜ëŠ”-ì„¸-ê°€ì§€-ì£¼ìš”-ê³¼ì •"><a href="#DiffableDataSourceë¥¼-ì‚¬ìš©í•˜ëŠ”-ì„¸-ê°€ì§€-ì£¼ìš”-ê³¼ì •" class="headerlink" title="DiffableDataSourceë¥¼ ì‚¬ìš©í•˜ëŠ” ì„¸ ê°€ì§€ ì£¼ìš” ê³¼ì •"></a>DiffableDataSourceë¥¼ ì‚¬ìš©í•˜ëŠ” ì„¸ ê°€ì§€ ì£¼ìš” ê³¼ì •</h3><ol>
<li>ìƒˆë¡œìš´ Dataë¡œ DataSourceë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.</li>
<li>ìƒˆë¡œìš´ Snapshotì„ ë§Œë“ ë‹¤.</li>
<li><code>apply()</code> ë©”ì„œë“œë¥¼ í†µí•´ ë³€í™”ë¥¼ ì œì¶œí•œë‹¤.</li>
</ol>
<h4 id="ìƒˆ-Snapshot-ë§Œë“œëŠ”-ë²•"><a href="#ìƒˆ-Snapshot-ë§Œë“œëŠ”-ë²•" class="headerlink" title="ìƒˆ Snapshot ë§Œë“œëŠ” ë²•"></a>ìƒˆ Snapshot ë§Œë“œëŠ” ë²•</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mountains = mountainsController.filteredMountains(with: <span class="built_in">filter</span>).sorted &#123; $<span class="number">0</span>.name &lt; $<span class="number">1</span>.name &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NSDiffableDataSourceSnapshotì€ SectionIdentifierTypeê³¼ ItemIdentiferTypeì„ ê°€ì§€ëŠ” ì œë„¤ë¦­ íƒ€ì…</span></span><br><span class="line"><span class="keyword">let</span> snapshot = <span class="type">NSDiffableDataSourceSnapshot</span>&lt;<span class="type">Section</span>, <span class="type">MountainsController</span>.<span class="type">Mountain</span>&gt;()</span><br><span class="line"><span class="comment">// .mainì€ Section enumì˜ case</span></span><br><span class="line">snapshot.appendSections([.main])</span><br><span class="line"><span class="comment">// ItemIdetifierTypeì˜ ë°°ì—´ì„ ì „ë‹¬í•´ì•¼ í•˜ì§€ë§Œ</span></span><br><span class="line"><span class="comment">// Mountainì€ í•´ë‹¹ íƒ€ì…ì˜ êµ¬í˜„ì²´ì´ê¸° ë•Œë¬¸ì— ê·¸ëŒ€ë¡œ ì „ë‹¬</span></span><br><span class="line">snapshot.appendItems(mountains)</span><br><span class="line">dataSource.apply(snapshot, animatingDifferences: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ItemIdentiferTypeì˜-ì •ì˜"><a href="#ItemIdentiferTypeì˜-ì •ì˜" class="headerlink" title="ItemIdentiferTypeì˜ ì •ì˜"></a>ItemIdentiferTypeì˜ ì •ì˜</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Hashableì„ ë”°ë¥´ê¸° ë•Œë¬¸ì— DiffableDatasourceê°€</span></span><br><span class="line"><span class="comment">// Uniqueí•œ identifierë¥¼ ê°€ì§€ê³ </span></span><br><span class="line"><span class="comment">// ë¬´ì—‡ì´ ì¶”ê°€ / ì‚­ì œë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Mountain</span>: <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">let</span> identifier = <span class="type">UUID</span>()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hash</span><span class="params">(into hasher: <span class="keyword">inout</span> Hasher)</span></span> &#123;</span><br><span class="line">        hasher.combine(identifier)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(lhs: Mountain, rhs: Mountain)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lhs.identifier == rhs.identifier</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="DataSourceì˜-êµ¬ì„±"><a href="#DataSourceì˜-êµ¬ì„±" class="headerlink" title="DataSourceì˜ êµ¬ì„±"></a>DataSourceì˜ êµ¬ì„±</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì›ë˜ cellForItemAt, cellForRowAtì—ì„œ í•˜ë˜ ì¼ì„</span></span><br><span class="line"><span class="comment">// í´ë¡œì €ë¡œ ì „ë‹¬í•˜ì—¬ cellì„ êµ¬ì„±</span></span><br><span class="line"><span class="keyword">self</span>.dataSource = <span class="type">UITableViewDiffableDataSource</span></span><br><span class="line">    &lt;<span class="type">Section</span>, <span class="type">Item</span>&gt;(tableView: tableView) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>]</span><br><span class="line">        (tableView: <span class="type">UITableView</span>, indexPath: <span class="type">IndexPath</span>, item: <span class="type">Item</span>) -&gt; <span class="type">UITableViewCell</span>? <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> <span class="keyword">self</span> = <span class="keyword">self</span>, <span class="keyword">let</span> wifiController = <span class="keyword">self</span>.wifiController <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> cell = tableView.dequeueReusableCell(</span><br><span class="line">        withIdentifier: <span class="type">WiFiSettingsViewController</span>.reuseIdentifier,</span><br><span class="line">        <span class="keyword">for</span>: indexPath)</span><br><span class="line">   <span class="comment">// Cellì˜ IdentifierTypeì— ë”°ë¼ Cellì„ êµ¬ì„±</span></span><br><span class="line">    <span class="comment">// network cell</span></span><br><span class="line">    <span class="keyword">if</span> item.isNetwork &#123;</span><br><span class="line">        cell.textLabel?.text = item.title</span><br><span class="line">        cell.accessoryType = .detailDisclosureButton</span><br><span class="line">        cell.accessoryView = <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// configuration cells</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> item.isConfig &#123;</span><br><span class="line">        cell.textLabel?.text = item.title</span><br><span class="line">        <span class="keyword">if</span> item.type == .wifiEnabled &#123;</span><br><span class="line">            <span class="keyword">let</span> enableWifiSwitch = <span class="type">UISwitch</span>()</span><br><span class="line">            enableWifiSwitch.isOn = wifiController.wifiEnabled</span><br><span class="line">            enableWifiSwitch.addTarget(<span class="keyword">self</span>, action: #selector(<span class="keyword">self</span>.toggleWifi(<span class="number">_</span>:)), <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">            cell.accessoryView = enableWifiSwitch</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cell.accessoryView = <span class="literal">nil</span></span><br><span class="line">            cell.accessoryType = .detailDisclosureButton</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">"Unknown item type!"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Considerations"><a href="#Considerations" class="headerlink" title="Considerations"></a>Considerations</h3><ul>
<li><code>performBatchUpdates()</code>, <code>insertItems()</code> ëŒ€ì‹  <code>apply()</code> ë¥¼ í˜¸ì¶œí•˜ì.</li>
<li>Snapshotì„ êµ¬ì„±í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Empty snapshot</span></span><br><span class="line"><span class="keyword">let</span> snapshot = <span class="type">NSDiffableDataSourceSnapshot</span>&lt;<span class="type">Section</span>, <span class="type">UUID</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Current data source snapshot copy</span></span><br><span class="line"><span class="keyword">let</span> snapshot = datasource.snapshot()</span><br></pre></td></tr></table></figure>
<ul>
<li><code>append</code> ë¿ë§Œ ì•„ë‹ˆë¼ <code>insert</code>, <code>move</code> ë©”ì„œë“œë„ Snapshotì´ ì œê³µ</li>
<li>IdentifierëŠ” uniqueí•´ì•¼ í•˜ë©° Hashableì„ ì¤€ìˆ˜í•´ì•¼ í•¨.</li>
</ul>
<h3 id="IndexPath-based-APIëŠ”-ì–´ë–»ê²Œ-ë˜ëŠ”-ê²ƒì¸ê°€"><a href="#IndexPath-based-APIëŠ”-ì–´ë–»ê²Œ-ë˜ëŠ”-ê²ƒì¸ê°€" class="headerlink" title="IndexPath-based APIëŠ” ì–´ë–»ê²Œ ë˜ëŠ” ê²ƒì¸ê°€?"></a>IndexPath-based APIëŠ” ì–´ë–»ê²Œ ë˜ëŠ” ê²ƒì¸ê°€?</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">let</span> identifier = dataSource.itemIdentifier(<span class="keyword">for</span>: indexPath) &#123;</span><br><span class="line">        <span class="comment">// Identifierë¥¼ ì–»ì–´ í•„ìš”í•œ ì‘ì—…ì„ í•´ì£¼ë©´ ë¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h4><ul>
<li>ê°€ëŠ¥í•œ í•œ ë¹ ë¥´ê²Œ ë§Œë“¤ì—ˆìŒ</li>
<li>í•˜ì§€ë§Œ diffingì€ linearí•œ ë™ì‘ì´ê¸° ë•Œë¬¸ì— ê°œë°œ ë‹¨ê³„ì—ì„œ ì„±ëŠ¥ì„ ì¸¡ì •í•´ë³´ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”!</li>
<li>Background íì—ì„œì˜ <code>apply()</code> í˜¸ì¶œì´ ì•ˆì „í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì„ ê³ ë ¤í•´ì„œ ì ìš©<ul>
<li>main, background í ì¤‘ í•˜ë‚˜ë¥¼ ì •í•´ì„œ í˜¸ì¶œí•˜ì.</li>
</ul>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2019/220/" target="_blank" rel="noopener">WWDC 2019 220 - Advances in UI Data Sources</a></li>
</ul>
<h2 id="Reference-1"><a href="#Reference-1" class="headerlink" title="Reference"></a>Reference</h2>
  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Current-State-of-the-Art"><span class="toc-number">1.</span> <span class="toc-text">Current State of the Art</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Where-is-Our-Truth"><span class="toc-number">1.1.</span> <span class="toc-text">Where is Our Truth?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ†•-Diffable-Data-Source"><span class="toc-number">2.</span> <span class="toc-text">ğŸ†• Diffable Data Source</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Snapshots"><span class="toc-number">2.1.</span> <span class="toc-text">Snapshots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ë„¤-ê°€ì§€-ìš”ì†Œ"><span class="toc-number">2.2.</span> <span class="toc-text">ë„¤ ê°€ì§€ ìš”ì†Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DiffableDataSourceë¥¼-ì‚¬ìš©í•˜ëŠ”-ì„¸-ê°€ì§€-ì£¼ìš”-ê³¼ì •"><span class="toc-number">2.3.</span> <span class="toc-text">DiffableDataSourceë¥¼ ì‚¬ìš©í•˜ëŠ” ì„¸ ê°€ì§€ ì£¼ìš” ê³¼ì •</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ìƒˆ-Snapshot-ë§Œë“œëŠ”-ë²•"><span class="toc-number">2.3.1.</span> <span class="toc-text">ìƒˆ Snapshot ë§Œë“œëŠ” ë²•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ItemIdentiferTypeì˜-ì •ì˜"><span class="toc-number">2.3.2.</span> <span class="toc-text">ItemIdentiferTypeì˜ ì •ì˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DataSourceì˜-êµ¬ì„±"><span class="toc-number">2.3.3.</span> <span class="toc-text">DataSourceì˜ êµ¬ì„±</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Considerations"><span class="toc-number">2.4.</span> <span class="toc-text">Considerations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IndexPath-based-APIëŠ”-ì–´ë–»ê²Œ-ë˜ëŠ”-ê²ƒì¸ê°€"><span class="toc-number">2.5.</span> <span class="toc-text">IndexPath-based APIëŠ” ì–´ë–»ê²Œ ë˜ëŠ” ê²ƒì¸ê°€?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance"><span class="toc-number">2.5.1.</span> <span class="toc-text">Performance</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">3.</span> <span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-1"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&text=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&is_video=false&description=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Advances in UI Data Sources - WWDC 2019 220&body=Check out this article: https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&title=Advances in UI Data Sources - WWDC 2019 220"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://wnstkdyu.github.io/2019/08/05/Advances-in-UI-Data-Sources-WWDC-2019-220/&name=Advances in UI Data Sources - WWDC 2019 220&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Alpaca
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-116302583-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'alpacablog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


